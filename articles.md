# Integers vs Floating-Point Numbers

> "You think you know integers and floating-point numbers. How cute."
> （整数と浮動小数点を知っているつもり？ ― 実は全然知らない）

この記事では、整数と浮動小数点の「本質的な違い」を整理している。

---

## 1. 精度 (Accuracy) と 厳密さ (Precision)

- **整数**
  - 精度：完全に正確（オーバーフロー以外は誤差ゼロ）
  - 厳密さ：不足（小数は表現不可、情報が粗い）
  - 例: 5 ÷ 2 = 2 （小数部は切り捨て）

- **浮動小数点**
  - 精度：不完全（多くの数を正確に表せない、誤差を含む）
  - 厳密さ：優れている（幅広い範囲・小数を扱える）
  - 例: 1/3 → 0.333…（有限ビットでは正確に表せない）

---

## 2. IEEE-754 による表現

浮動小数点数は **符号・指数・仮数** に分けて表現される。


- **正規化 (normalized)**: 仮数は常に `1.m` の形（先頭の1は暗黙）
- **特殊値**
  - `0` = 全ビット0
  - `∞` = 指数が全1、仮数=0
  - `NaN` = 指数が全1、仮数≠0
- **単精度 (float)**
  - 仮数: 23ビット
  - 指数: 8ビット（バイアス127）
  - 最大値 ≈ 3.4e+38, 最小値 ≈ 1.4e-45

---

## 3. 出力と表記の問題

- `%f` では大きな数が桁あふれしやすい
- `%e` では 0 が `0.000000e+00` と表示される
- 読みやすさのためには：
  - 数の大きさに応じて `%f` と `%e` を切り替える
  - 小数部が実質ゼロなら省略する
  - 桁数を指定して過不足なく出力する

---

## まとめ

- **整数** = 精度は完全だが、表現力（厳密さ）が不足
- **浮動小数点** = 幅広い範囲を扱えるが、精度は常に妥協
- **実用上の知恵**
  - 浮動小数点の誤差を前提にコードを書く
  - `==` 比較は避け、許容誤差を設定する
  - 出力は状況に応じてフォーマットを調整する

---
